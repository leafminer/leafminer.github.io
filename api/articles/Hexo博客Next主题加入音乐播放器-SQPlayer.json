{"title":"Hexo博客Next主题加入音乐播放器-SQPlayer","slug":"Hexo博客Next主题加入音乐播放器-SQPlayer","date":"2024-10-30T04:08:28.000Z","updated":"2024-11-05T12:09:22.286Z","comments":true,"path":"api/articles/Hexo博客Next主题加入音乐播放器-SQPlayer.json","excerpt":"SQPlayer一个简洁到极致的单曲播放器。代码由奇趣保罗(https://paugram.com)原创，并遵守 MIT 开源协议。","covers":["https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309377882-54220787-065b-4033-9683-6a36bea1d8ab.png","https://cdn.nlark.com/yuque/0/2024/png/12885947/1730729590552-7dda6c06-cc97-49db-98e6-6041d6db6a05.png","https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309397117-c7d822ec-9993-4327-ad20-c7557950a39b.png","https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314435092-31479aa8-9638-4a64-a7eb-52e69244c322.png","https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314761553-c0bf9c71-0f88-44d6-a8e6-1acd992ded57.png"],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><div id=\"vip-container\"><p>SQPlayer一个简洁到极致的单曲播放器。代码由奇趣保罗(<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYXVncmFtLmNvbQ==\">https://paugram.com<i class=\"fa fa-external-link-alt\"></i></span>)原创，并遵守 MIT 开源协议。</p>\n<span id=\"more\"></span>\n<h2 id=\"下载播放器\">下载播放器</h2>\n<p>网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RyZWFtZXItUGF1bC9TcXVhcmUtUGxheWVy\">github.com<i class=\"fa fa-external-link-alt\"></i></span></p>\n<p>解压找到需要的文件：SQPlayer.js和SQPlayer.css</p>\n<h2 id=\"安装播放器\">安装播放器</h2>\n<p>将<code>SQPlayer.js</code>​放到博客对应的<code>\\node_modules\\hexo-theme-next\\source\\js</code>​文件夹下。</p>\n<p>将<code>SQPlayer.css</code>​放到博客对应的<code>\\node_modules\\hexo-theme-next\\source\\css</code>​文件夹下。</p>\n<h2 id=\"修改文件\">修改文件</h2>\n<p>修改<code>SQPlayer.css</code>​样式，使其适合主题侧边栏。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqp &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">15em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">8em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">user-select</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">0em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">1em</span> <span class=\"number\">1em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#c8cae1</span> center/cover no-repeat;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改<code>SQPlayer.js</code>​</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setupByCloudMusic = <span class=\"function\">(<span class=\"params\">cid, server</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> getData = &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;moeyao&quot;</span>: <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">`https://api.moeyao.cn/meting/?server=tencent&amp;type=playlist&amp;id=<span class=\"subst\">$&#123;cid&#125;</span>`</span>).<span class=\"title function_\">then</span>(</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.<span class=\"title function_\">json</span>()</span><br><span class=\"line\">        ).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">items</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> item = items[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (!item) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;返回数据为空&quot;</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"variable language_\">this</span>.<span class=\"title function_\">setup</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">title</span>: item.<span class=\"property\">name</span>,</span><br><span class=\"line\">            <span class=\"attr\">artist</span>: item.<span class=\"property\">artist</span>,</span><br><span class=\"line\">            <span class=\"attr\">cover</span>: item.<span class=\"property\">cover</span>,</span><br><span class=\"line\">            <span class=\"attr\">link</span>: item.<span class=\"property\">url</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      <span class=\"comment\">// &quot;paul&quot;: () =&gt; (</span></span><br><span class=\"line\">      <span class=\"comment\">//   fetch(`https://api.paugram.com/netease/?id=$&#123;cid&#125;`).then(</span></span><br><span class=\"line\">      <span class=\"comment\">//     (res) =&gt; res.json()</span></span><br><span class=\"line\">      <span class=\"comment\">//   ).then((item) =&gt; &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//     this.setup(item);</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125;)</span></span><br><span class=\"line\">      <span class=\"comment\">// ),</span></span><br><span class=\"line\">    &#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"把CSS引入到生成的主页中\">把CSS引入到生成的主页中</h2>\n<p>需要在在网页 <code>head</code>​ 标签引用项目的 CSS 文件 <code>SQPlayer.css</code>​：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;SQPlayer.css&quot;</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span>/&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>修改<code>\\node_modules\\hexo-theme-next\\layout\\_layout.njk</code>​文件，添加<code>&lt;link href=&quot;SQPlayer.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;</code>​</p>\n<p>​<img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309377882-54220787-065b-4033-9683-6a36bea1d8ab.png\" alt=\"\">​</p>\n<h2 id=\"引入JS\">引入JS</h2>\n<p><code>hexo\\node_modules\\hexo-theme-next\\layout\\_scripts\\index.njk</code></p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730729590552-7dda6c06-cc97-49db-98e6-6041d6db6a05.png\" alt=\"\"></p>\n<h2 id=\"放置到侧边栏\">放置到侧边栏</h2>\n<p>在网页 <code>body</code>​ 标签内的最后一行，或使用 <code>defer</code>​ 属性引用项目的 JS 文件 <code>SQPlayer.js</code>​。</p>\n<p>如果使用 <code>data-cid</code>​ 属性引用播放器，就写成这样，其中 <code>23682511</code>​ 就是网易云音乐一首歌的 ID。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-cid</span>=<span class=\"string\">&quot;23682511&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span> # data-cid指定了歌曲ID，这里是tencent QQ音乐源</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;SQPlayer.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>修改<code>\\node_modules\\hexo-theme-next\\layout_macro\\sidebar.njk</code>​文件，添加<code>&lt;script src=&quot;SQPlayer.js&quot;&gt;&lt;/script&gt;</code>​</p>\n<p>修改 <code>\\node_modules\\hexo-theme-next\\layout_macro\\sidebar.njk</code>​文件，添加<code>&lt;sqp data-cid=&quot;2112569740&quot;&gt;&lt;/sqp&gt;</code>​</p>\n<p>​<img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309397117-c7d822ec-9993-4327-ad20-c7557950a39b.png\" alt=\"\">​</p>\n<p>在网页 <code>body </code>​标签内插入一个 <code>sqp</code>​ 标签：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>如果使用静态方法引用播放器，则需要同时编写四个属性。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;Crimson &amp; Clover&quot;</span> <span class=\"attr\">data-artist</span>=<span class=\"string\">&quot;Tommy James&quot;</span> <span class=\"attr\">data-cover</span>=<span class=\"string\">&quot;封面链接&quot;</span> <span class=\"attr\">data-link</span>=<span class=\"string\">&quot;歌曲链接&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其他属性可以参考本文档的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnBhdWwucmVuL3NxdWFyZS8jLz9pZD0lZTUlYjElOWUlZTYlODAlYTc=\">属性<i class=\"fa fa-external-link-alt\"></i></span> 节点。</p>\n<h3 id=\"属性\">属性</h3>\n<p>Square Player 支持以下属性，它们分别的意义是：</p>\n<table>\n<thead>\n<tr>\n<th><strong>属性名</strong></th>\n<th><strong>用途</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>left</td>\n<td>至左显示</td>\n</tr>\n<tr>\n<td>data-title</td>\n<td>歌曲名，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-artist</td>\n<td>艺术家，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-cover</td>\n<td>专辑封面图片链接，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-link</td>\n<td>歌曲地址，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-cid</td>\n<td>网易云音乐的 ID，如果编写了此项目，将忽略以上 data-*设置</td>\n</tr>\n</tbody>\n</table>\n<p>将以上属性放在<code>&lt;sqp&gt;</code>​ 标签内即可生效。</p>\n<h2 id=\"修改歌曲-网易云\">修改歌曲-网易云</h2>\n<h3 id=\"歌单ID\">歌单ID</h3>\n<p>打开网易云找到喜欢的歌单，浏览器地址栏会显示ID</p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314435092-31479aa8-9638-4a64-a7eb-52e69244c322.png\" alt=\"\"></p>\n<p>将该ID填写到<code>https://api.moeyao.cn/meting/?type=playlist&amp;id=</code>连接中，可查看到返回的Json数据。</p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314761553-c0bf9c71-0f88-44d6-a8e6-1acd992ded57.png\" alt=\"\"></p>\n<p>可以根据返回的歌单Json在html页面的<code>body</code>中手动修改成喜欢的单曲。无需改动SQPlayer.js</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;라라라&quot;</span> <span class=\"attr\">data-artist</span>=<span class=\"string\">&quot;淑熙&quot;</span> <span class=\"attr\">data-cover</span>=<span class=\"string\">&quot;https://api.moeyao.cn/meting/?server=netease&amp;type=cover&amp;id=5357743&quot;</span> <span class=\"attr\">data-link</span>=<span class=\"string\">&quot;https://api.moeyao.cn/meting/?server=netease&amp;type=url&amp;id=5357743&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>此外，也可以通过修改SQPlayer.js文件来引用单曲。</p>\n<p>首先，在html页面的<code>body</code>中引用歌单id</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-cid</span>=<span class=\"string\">&quot;6846019260&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>还要修改SQPlayer.js文件，</p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p><code>fetch()</code></p>\n</li>\n<li class=\"lvl-2\">\n<p><code>const item = items[0];</code>中[0]表示第一首歌，依此类推，选择对应的单曲</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setupByCloudMusic = <span class=\"function\">(<span class=\"params\">cid, server</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> getData = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;moeyao&quot;</span>: <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">      <span class=\"title function_\">fetch</span>(<span class=\"string\">`https://api.moeyao.cn/meting/?type=playlist&amp;id=<span class=\"subst\">$&#123;cid&#125;</span>`</span>).<span class=\"title function_\">then</span>(</span><br><span class=\"line\">        <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.<span class=\"title function_\">json</span>()</span><br><span class=\"line\">      ).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">items</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> item = items[<span class=\"number\">0</span>]; <span class=\"comment\">// 获取list第一首歌曲</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!item) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;返回数据为空&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">setup</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: item.<span class=\"property\">name</span>,</span><br><span class=\"line\">          <span class=\"attr\">artist</span>: item.<span class=\"property\">artist</span>,</span><br><span class=\"line\">          <span class=\"attr\">cover</span>: item.<span class=\"property\">cover</span>,</span><br><span class=\"line\">          <span class=\"attr\">link</span>: item.<span class=\"property\">url</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    <span class=\"comment\">// &quot;paul&quot;: () =&gt; (</span></span><br><span class=\"line\">    <span class=\"comment\">//   fetch(`https://api.paugram.com/netease/?id=$&#123;cid&#125;`).then(</span></span><br><span class=\"line\">    <span class=\"comment\">//     (res) =&gt; res.json()</span></span><br><span class=\"line\">    <span class=\"comment\">//   ).then((item) =&gt; &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     this.setup(item);</span></span><br><span class=\"line\">    <span class=\"comment\">//   &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// ),</span></span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考\">参考</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnBhdWwucmVuL3NxdWFyZS8jLw==\">Square Player 文档<i class=\"fa fa-external-link-alt\"></i></span></p>\n</div>\n\n\t\t\t<script src=\"https://my.openwrite.cn/js/readmore.js\" type=\"text/javascript\"></script>\n\t\t\t<script>\n\t\t\tvar isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);\n\t\t\tif (!isMobile) {\n\t\t\t    var btw = new BTWPlugin();\n\t\t\t    btw.init({\n\t\t\t        \"id\": \"vip-container\",\n\t\t\t        \"blogId\": \"33502-1730425843713-524\",\n\t\t\t        \"name\": \"虫子的生存笔记\",\n\t\t\t        \"qrcode\": \"https://leaf-miner.pages.dev/image/%E5%85%AC%E4%BC%97%E5%8F%B7.png\",\n\t\t\t        \"keyword\": \"more\"\n\t\t\t    });\n\t\t\t}\n\t\t\t</script>\n\t\t","more":"<h2 id=\"下载播放器\">下载播放器</h2>\n<p>网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0RyZWFtZXItUGF1bC9TcXVhcmUtUGxheWVy\">github.com<i class=\"fa fa-external-link-alt\"></i></span></p>\n<p>解压找到需要的文件：SQPlayer.js和SQPlayer.css</p>\n<h2 id=\"安装播放器\">安装播放器</h2>\n<p>将<code>SQPlayer.js</code>​放到博客对应的<code>\\node_modules\\hexo-theme-next\\source\\js</code>​文件夹下。</p>\n<p>将<code>SQPlayer.css</code>​放到博客对应的<code>\\node_modules\\hexo-theme-next\\source\\css</code>​文件夹下。</p>\n<h2 id=\"修改文件\">修改文件</h2>\n<p>修改<code>SQPlayer.css</code>​样式，使其适合主题侧边栏。</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sqp &#123;</span><br><span class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">15em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">8em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">    <span class=\"attribute\">float</span>: right;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">    <span class=\"attribute\">user-select</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">0em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">1em</span> <span class=\"number\">1em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: <span class=\"number\">#c8cae1</span> center/cover no-repeat;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改<code>SQPlayer.js</code>​</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setupByCloudMusic = <span class=\"function\">(<span class=\"params\">cid, server</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> getData = &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;moeyao&quot;</span>: <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">`https://api.moeyao.cn/meting/?server=tencent&amp;type=playlist&amp;id=<span class=\"subst\">$&#123;cid&#125;</span>`</span>).<span class=\"title function_\">then</span>(</span><br><span class=\"line\">          <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.<span class=\"title function_\">json</span>()</span><br><span class=\"line\">        ).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">items</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> item = items[<span class=\"number\">0</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (!item) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;返回数据为空&quot;</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"variable language_\">this</span>.<span class=\"title function_\">setup</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">title</span>: item.<span class=\"property\">name</span>,</span><br><span class=\"line\">            <span class=\"attr\">artist</span>: item.<span class=\"property\">artist</span>,</span><br><span class=\"line\">            <span class=\"attr\">cover</span>: item.<span class=\"property\">cover</span>,</span><br><span class=\"line\">            <span class=\"attr\">link</span>: item.<span class=\"property\">url</span></span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      ),</span><br><span class=\"line\">      <span class=\"comment\">// &quot;paul&quot;: () =&gt; (</span></span><br><span class=\"line\">      <span class=\"comment\">//   fetch(`https://api.paugram.com/netease/?id=$&#123;cid&#125;`).then(</span></span><br><span class=\"line\">      <span class=\"comment\">//     (res) =&gt; res.json()</span></span><br><span class=\"line\">      <span class=\"comment\">//   ).then((item) =&gt; &#123;</span></span><br><span class=\"line\">      <span class=\"comment\">//     this.setup(item);</span></span><br><span class=\"line\">      <span class=\"comment\">//   &#125;)</span></span><br><span class=\"line\">      <span class=\"comment\">// ),</span></span><br><span class=\"line\">    &#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"把CSS引入到生成的主页中\">把CSS引入到生成的主页中</h2>\n<p>需要在在网页 <code>head</code>​ 标签引用项目的 CSS 文件 <code>SQPlayer.css</code>​：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;SQPlayer.css&quot;</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/css&quot;</span>/&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>修改<code>\\node_modules\\hexo-theme-next\\layout\\_layout.njk</code>​文件，添加<code>&lt;link href=&quot;SQPlayer.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;</code>​</p>\n<p>​<img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309377882-54220787-065b-4033-9683-6a36bea1d8ab.png\" alt=\"\">​</p>\n<h2 id=\"引入JS\">引入JS</h2>\n<p><code>hexo\\node_modules\\hexo-theme-next\\layout\\_scripts\\index.njk</code></p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730729590552-7dda6c06-cc97-49db-98e6-6041d6db6a05.png\" alt=\"\"></p>\n<h2 id=\"放置到侧边栏\">放置到侧边栏</h2>\n<p>在网页 <code>body</code>​ 标签内的最后一行，或使用 <code>defer</code>​ 属性引用项目的 JS 文件 <code>SQPlayer.js</code>​。</p>\n<p>如果使用 <code>data-cid</code>​ 属性引用播放器，就写成这样，其中 <code>23682511</code>​ 就是网易云音乐一首歌的 ID。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-cid</span>=<span class=\"string\">&quot;23682511&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span> # data-cid指定了歌曲ID，这里是tencent QQ音乐源</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;SQPlayer.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>修改<code>\\node_modules\\hexo-theme-next\\layout_macro\\sidebar.njk</code>​文件，添加<code>&lt;script src=&quot;SQPlayer.js&quot;&gt;&lt;/script&gt;</code>​</p>\n<p>修改 <code>\\node_modules\\hexo-theme-next\\layout_macro\\sidebar.njk</code>​文件，添加<code>&lt;sqp data-cid=&quot;2112569740&quot;&gt;&lt;/sqp&gt;</code>​</p>\n<p>​<img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730309397117-c7d822ec-9993-4327-ad20-c7557950a39b.png\" alt=\"\">​</p>\n<p>在网页 <code>body </code>​标签内插入一个 <code>sqp</code>​ 标签：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>如果使用静态方法引用播放器，则需要同时编写四个属性。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;Crimson &amp; Clover&quot;</span> <span class=\"attr\">data-artist</span>=<span class=\"string\">&quot;Tommy James&quot;</span> <span class=\"attr\">data-cover</span>=<span class=\"string\">&quot;封面链接&quot;</span> <span class=\"attr\">data-link</span>=<span class=\"string\">&quot;歌曲链接&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其他属性可以参考本文档的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnBhdWwucmVuL3NxdWFyZS8jLz9pZD0lZTUlYjElOWUlZTYlODAlYTc=\">属性<i class=\"fa fa-external-link-alt\"></i></span> 节点。</p>\n<h3 id=\"属性\">属性</h3>\n<p>Square Player 支持以下属性，它们分别的意义是：</p>\n<table>\n<thead>\n<tr>\n<th><strong>属性名</strong></th>\n<th><strong>用途</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>left</td>\n<td>至左显示</td>\n</tr>\n<tr>\n<td>data-title</td>\n<td>歌曲名，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-artist</td>\n<td>艺术家，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-cover</td>\n<td>专辑封面图片链接，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-link</td>\n<td>歌曲地址，用于自定义歌曲</td>\n</tr>\n<tr>\n<td>data-cid</td>\n<td>网易云音乐的 ID，如果编写了此项目，将忽略以上 data-*设置</td>\n</tr>\n</tbody>\n</table>\n<p>将以上属性放在<code>&lt;sqp&gt;</code>​ 标签内即可生效。</p>\n<h2 id=\"修改歌曲-网易云\">修改歌曲-网易云</h2>\n<h3 id=\"歌单ID\">歌单ID</h3>\n<p>打开网易云找到喜欢的歌单，浏览器地址栏会显示ID</p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314435092-31479aa8-9638-4a64-a7eb-52e69244c322.png\" alt=\"\"></p>\n<p>将该ID填写到<code>https://api.moeyao.cn/meting/?type=playlist&amp;id=</code>连接中，可查看到返回的Json数据。</p>\n<p><img data-src=\"https://cdn.nlark.com/yuque/0/2024/png/12885947/1730314761553-c0bf9c71-0f88-44d6-a8e6-1acd992ded57.png\" alt=\"\"></p>\n<p>可以根据返回的歌单Json在html页面的<code>body</code>中手动修改成喜欢的单曲。无需改动SQPlayer.js</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;라라라&quot;</span> <span class=\"attr\">data-artist</span>=<span class=\"string\">&quot;淑熙&quot;</span> <span class=\"attr\">data-cover</span>=<span class=\"string\">&quot;https://api.moeyao.cn/meting/?server=netease&amp;type=cover&amp;id=5357743&quot;</span> <span class=\"attr\">data-link</span>=<span class=\"string\">&quot;https://api.moeyao.cn/meting/?server=netease&amp;type=url&amp;id=5357743&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>此外，也可以通过修改SQPlayer.js文件来引用单曲。</p>\n<p>首先，在html页面的<code>body</code>中引用歌单id</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sqp</span> <span class=\"attr\">data-cid</span>=<span class=\"string\">&quot;6846019260&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sqp</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>还要修改SQPlayer.js文件，</p>\n<ul class=\"lvl-0\">\n<li class=\"lvl-2\">\n<p><code>fetch()</code></p>\n</li>\n<li class=\"lvl-2\">\n<p><code>const item = items[0];</code>中[0]表示第一首歌，依此类推，选择对应的单曲</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">setupByCloudMusic = <span class=\"function\">(<span class=\"params\">cid, server</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> getData = &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;moeyao&quot;</span>: <span class=\"function\">() =&gt;</span> (</span><br><span class=\"line\">      <span class=\"title function_\">fetch</span>(<span class=\"string\">`https://api.moeyao.cn/meting/?type=playlist&amp;id=<span class=\"subst\">$&#123;cid&#125;</span>`</span>).<span class=\"title function_\">then</span>(</span><br><span class=\"line\">        <span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.<span class=\"title function_\">json</span>()</span><br><span class=\"line\">      ).<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">items</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> item = items[<span class=\"number\">0</span>]; <span class=\"comment\">// 获取list第一首歌曲</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!item) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&quot;返回数据为空&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"title function_\">setup</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">title</span>: item.<span class=\"property\">name</span>,</span><br><span class=\"line\">          <span class=\"attr\">artist</span>: item.<span class=\"property\">artist</span>,</span><br><span class=\"line\">          <span class=\"attr\">cover</span>: item.<span class=\"property\">cover</span>,</span><br><span class=\"line\">          <span class=\"attr\">link</span>: item.<span class=\"property\">url</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    ),</span><br><span class=\"line\">    <span class=\"comment\">// &quot;paul&quot;: () =&gt; (</span></span><br><span class=\"line\">    <span class=\"comment\">//   fetch(`https://api.paugram.com/netease/?id=$&#123;cid&#125;`).then(</span></span><br><span class=\"line\">    <span class=\"comment\">//     (res) =&gt; res.json()</span></span><br><span class=\"line\">    <span class=\"comment\">//   ).then((item) =&gt; &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     this.setup(item);</span></span><br><span class=\"line\">    <span class=\"comment\">//   &#125;)</span></span><br><span class=\"line\">    <span class=\"comment\">// ),</span></span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考\">参考</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLnBhdWwucmVuL3NxdWFyZS8jLw==\">Square Player 文档<i class=\"fa fa-external-link-alt\"></i></span></p>","categories":[{"name":"笔记","path":"api/categories/笔记.json"},{"name":"其他","path":"api/categories/其他.json"}],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"},{"name":"Next","path":"api/tags/Next.json"},{"name":"音乐","path":"api/tags/音乐.json"},{"name":"播放器","path":"api/tags/播放器.json"},{"name":"SQPlayer","path":"api/tags/SQPlayer.json"}]}