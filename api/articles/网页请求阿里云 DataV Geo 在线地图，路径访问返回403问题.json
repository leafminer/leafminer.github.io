{"title":"网页请求阿里云 DataV Geo 在线地图，路径访问返回403问题","slug":"网页请求阿里云 DataV Geo 在线地图，路径访问返回403问题","date":"2024-12-02T17:52:44.000Z","updated":"2024-12-03T02:59:12.905Z","comments":true,"path":"api/articles/网页请求阿里云 DataV Geo 在线地图，路径访问返回403问题.json","excerpt":"问题如下：部分javascript显示如下：1<br>2<br>3<br>4<br>5<br>6<br>document.getElementById(&quot;page&quot;).style.background = style[0];<br>var myChart = echarts.init(document.getElementById(&#x27;main&#x27;));<br>myChart.showLoading();<br>$.get(&#x27;https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json&#x27;, function (geoJson) &#123;<br>  myChart.hideLoading();<br>  echarts.registerMap(&#x27;china&#x27;, geoJson);<br>本地请求运行正常，上传到GitHub仓库中的网站后请求https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json 返回403，加载失败。","covers":["https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203102658585.png","https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203101758289.png"],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><div id=\"vip-container\"><h2 id=\"问题如下：\">问题如下：</h2>\n<p>部分javascript显示如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;page&quot;</span>).<span class=\"property\">style</span>.<span class=\"property\">background</span> = style[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"keyword\">var</span> myChart = echarts.<span class=\"title function_\">init</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;main&#x27;</span>));</span><br><span class=\"line\">myChart.<span class=\"title function_\">showLoading</span>();</span><br><span class=\"line\">$.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json&#x27;</span>, <span class=\"keyword\">function</span> (<span class=\"params\">geoJson</span>) &#123;</span><br><span class=\"line\">  myChart.<span class=\"title function_\">hideLoading</span>();</span><br><span class=\"line\">  echarts.<span class=\"title function_\">registerMap</span>(<span class=\"string\">&#x27;china&#x27;</span>, geoJson);</span><br></pre></td></tr></table></figure>\n<p>本地请求运行正常，上传到GitHub仓库中的网站后请求<span class=\"exturl\" data-url=\"aHR0cHM6Ly9nZW8uZGF0YXYuYWxpeXVuLmNvbS9hcmVhc192My9ib3VuZC8xMDAwMDBfZnVsbC5qc29u\">https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json<i class=\"fa fa-external-link-alt\"></i></span> 返回403，加载失败。</p>\n<span id=\"more\"></span>\n<h2 id=\"解决办法：\">解决办法：</h2>\n<p>在Html文件中的<code>&lt;head&gt;</code>​间添加：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;referrer&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;no-referrer&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>​<img data-src=\"https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203102658585.png\" alt=\"\">​</p>\n<h2 id=\"正常显示：\">正常显示：</h2>\n<p>本地，网站均正常显示：</p>\n<p>​<img data-src=\"https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203101758289.png\" alt=\"\">​</p>\n<h2 id=\"参考\">参考</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81OTI4NzAyNS9hcnRpY2xlL2RldGFpbHMvMTQxMjUxNDk0\">https://blog.csdn.net/weixin_59287025/article/details/141251494<i class=\"fa fa-external-link-alt\"></i></span></p>\n</div>\n\n\t\t\t<script src=\"https://my.openwrite.cn/js/readmore.js\" type=\"text/javascript\"></script>\n\t\t\t<script>\n\t\t\tvar isMobile = navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);\n\t\t\tif (!isMobile) {\n\t\t\t    var btw = new BTWPlugin();\n\t\t\t    btw.init({\n\t\t\t        \"id\": \"vip-container\",\n\t\t\t        \"blogId\": \"33502-1730425843713-524\",\n\t\t\t        \"name\": \"虫子的生存笔记\",\n\t\t\t        \"qrcode\": \"https://leaf-miner.pages.dev/image/%E5%85%AC%E4%BC%97%E5%8F%B7.png\",\n\t\t\t        \"keyword\": \"more\"\n\t\t\t    });\n\t\t\t}\n\t\t\t</script>\n\t\t","more":"<h2 id=\"解决办法：\">解决办法：</h2>\n<p>在Html文件中的<code>&lt;head&gt;</code>​间添加：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;referrer&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;no-referrer&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>​<img data-src=\"https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203102658585.png\" alt=\"\">​</p>\n<h2 id=\"正常显示：\">正常显示：</h2>\n<p>本地，网站均正常显示：</p>\n<p>​<img data-src=\"https://cdn.jsdelivr.net/gh/leafminer/tuchuang@master/2024/12/20241203101758289.png\" alt=\"\">​</p>\n<h2 id=\"参考\">参考</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81OTI4NzAyNS9hcnRpY2xlL2RldGFpbHMvMTQxMjUxNDk0\">https://blog.csdn.net/weixin_59287025/article/details/141251494<i class=\"fa fa-external-link-alt\"></i></span></p>","categories":[{"name":"笔记","path":"api/categories/笔记.json"},{"name":"其他","path":"api/categories/其他.json"}],"tags":[{"name":"API","path":"api/tags/API.json"},{"name":"问题","path":"api/tags/问题.json"},{"name":"地图","path":"api/tags/地图.json"},{"name":"阿里云","path":"api/tags/阿里云.json"},{"name":"403","path":"api/tags/403.json"}]}